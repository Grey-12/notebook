[toc]



# Go Programming Language Study Notes



## Chapter 1 数据类型



### 01. 变量

#### 01.01 变量的声明

``````go
var 变量名称 类型 = 表达式	
``````

- 指定变量类型，**声明后若不赋值，使用默认值**

  ``````go
  var i int // 声明不赋值，默认为零值 int类型的零值为0
  ``````

- 根据值自行判定变量类型（**类型推导**）

  ``````go
  var num = 10.11 // 此时num为float64
  ``````

- 省略`var`，使用 **:=** 进行赋值

  ``````go
  name := "jack" // 此时name为string类型
  ``````

- 多变量声明

  ``````go
  n1, name, age := 100, "jack", 18
  var (
  	n2 = 200
  	n3 = 300
  	name2 = "Tom"
  )
  ``````



### 02. 整数类型

| 类型     | 有无符号 | 占用空间                     | 表数范围                                                     | 备注                |
| -------- | -------- | ---------------------------- | ------------------------------------------------------------ | ------------------- |
| `int`    | 有       | 32位系统4字节  64位系统8字节 | -2<sup>31</sup> ~ 2<sup>31</sup>-1   -2<sup>63</sup> ~ 2<sup>63</sup>-1 |                     |
| `int8`   | 有       | 1字节                        | -128 ~ 127                                                   |                     |
| `int16`  | 有       | 2字节                        | -2<sup>15</sup> ~ 2<sup>15</sup> -1                          |                     |
| `int32`  | 有       | 4字节                        | -2<sup>31</sup> ~ 2<sup>31</sup>-1                           |                     |
| `int64`  | 有       | 8字节                        | -2<sup>63</sup> ~ 2<sup>63</sup>-1                           |                     |
| `uint8`  | 无       | 1字节                        | 0 ~ 255                                                      |                     |
| `uint16` | 无       | 2字节                        | 0 ~ 2<sup>16</sup> -1                                        |                     |
| `uint32` | 无       | 4字节                        | 0 ~ 2<sup>32</sup> -1                                        |                     |
| `uint64` | 无       | 8字节                        | 0 ~ 2<sup>64</sup> -1                                        |                     |
| `rune`   | 有       | 4字节                        | -2<sup>31</sup> ~ 2<sup>31</sup>-1                           | 表示一个`unicode`码 |
| `byte`   | 无       | 与`uint8`等价                | 0 ~ 255                                                      | 1byte = 8bit        |

- `Golang` 的整型默认声明为`int`

- 查看变量字节大小及数据类型

  ``````go
  var n int64
  fmt.Printf("n type %T n size %d", n, unsafe.Sizeof(n)) 	
  ``````



### 03. 小数类型/浮点型

| 类型            | 占用存储空间 | 表数范围               |
| --------------- | ------------ | ---------------------- |
| 单精度`float32` | 4字节        | -3.403E38 ~ 3.403E38   |
| 双精度`float64` | 8字节        | -1.798E308 ~ 1.798E308 |

- 浮点数=符号位 + 指数位 + 尾数位（浮点数都是有符号的）

- 尾数部分可能丢失，造成精度损失

- 浮点类型有固定范围和字段长度，不受OS影响

- 浮点数默认声明为`float64`, 默认值为0

- 浮点数表达方式

  ``````go
  // 十进制数形式
  num := 5.12
  num2 := .123 // 0.123
  
  // 科学计数法形式
  num3 := 5.1234e2 // 5.1234 * 10的2次方
  num4 := 5.1234E-2 // 5.1234 / 10的2次方 0.051234
  ``````



#### 03.01 字符类型

- Go 中没有专门的字符类型，如果存储单个字符，一般使用`byte`保存
- 字符串就是一串固定长度的字符连接起来的字符序列。Go中的字符串是由单个字节连接起来的。
- 字符常量使用单引号扩起来的单个字符。 Go中使用UTF-8编码
- 字符的本质是一个整数，直接输出时对应的为UTF-8的码值
- 可以直接给某个变量赋值一个数字，然后格式化%c输出对应的`unicode`字符
- **字符可以进行运算的**

###  04. 布尔类型

- `bool`类型数据只允许有true和false
- `bool` 占 1字节
- `bool `类型适于**逻辑运算**， 一般用于程序流程控制
- `bool` 类型零值为 false

### 05. string类型

- 字符串就是一串固定长度的字符连接起来的字符序列。Go中的字符串是由单个字节连接起来的。

- 字符串赋值过后，字符串不能修改（不可变）
- 字符串表现形式: 01.双引号 02. 反引号
- 字符串拼接使用 `+`
- 字符串默认值为空字符串`""`

### 06. 基本类型转换

**Go中不同类型的变量之间赋值时需进行显示转换**

- 基本语法

  `````go
  /* 
  表达式 T(v) 将值v 转换为类型T
  T: 数据类型
  v: 需要转换的数据
  */
  
  package main
  
  import "fmt"
  
  func main() {
      var i int32 = 100
      var n1 float32 = float32(i)
      var n2 int8 = int8(i)
      var n3 int64 = int64(i)  // 全部为显示转换
  }
  `````

- 如果将`int64` 转成`int8` 编译不会报错，会按照溢出处理



### 07. 基本数据类型和string转换

#### 07.01 基本数据类型转string类型

- `fmt.Sprintf("%参数", 表达式)`

  ``````go
  func Sprintf(format string, a ...interface{}) string
  // Sprintf根据format参数生成格式化的字符串并返回该字符串
  // format参数需要和表达式的数据类型相匹配
  var num1 int = 99
  str = fmt.Sprintf("%d", num1) 
  // %d  十进制整数
  // %x, %o, %b  十六进制， 八进制， 二进制整数
  // %f, %g, %e  浮点数：不同的取值范围
  // %t    布尔类型
  // %c    字符rune 
  // %s    字符串
  // %q    带双引号的字符串或者带单引号的字符
  // %v    变量的自然形式
  // %T    变量的类型
  // %%    字面上百分号标志
  ``````

- 使用`strconv`包的函数进行转换

  ``````go
  func FormatBool(b bool) string
  func FormatFloat(f float64, fmt byte, prec, bitSize int) string
  // num float64 = 1.0
  // str = strconv.FormatFloat(num, "f", 10, 64)
  // f 格式 10 保留小数位10位 64 表示float64
  func FormatInt(i int64, base int) string
  func FormatUint(i uint64, base int) string
  func Itoa(i int) string // Itoa是FormatInt(i, 10) 的简写
  ``````



#### 07.02 string类型转基本数据类型

- 使用`strconv`包中函数

  ``````go
  func ParseBool(str string) (value bool, err error)
  func ParseFloat(s string, bitSize int) (f float64, err error)
  func ParseInt(s string, base int, bitSize int) (i int64, err error)
  func ParseUint(s string, b int, bitSize int) (n uint64, err error)
  ``````

- 将string类型转换为基本数据类型时，要确保string类型能够转成有效的数据



### 08. 指针

- 基本数据类型，变量存的数据为值， 叫值类型

- 获取变量的地址用`&`符号

  ``````go
  var num int
  ptrNum := &num // 此时ptrNum为*int类型指针
  // 指针存储的为指向值的内存地址， 指针数据本身也有自己的内存地址
  ``````

- 获取指针类型所指向的值，使用`*`

  ``````go
  var ptr *int
  fmt.Println(*ptr) // 0
  ``````

- 值类型都有对应的指针类型，形式为`*Type`

- 值类型包括：`int`, `float`,`bool`, `string`, 数组，结构体`struct`

- 引用类型： 指针， `slice`切片， `map` , 管道`channel`, 接口`interface`

- 值类型变量直接存储值， 通常存在内存栈中

- 引用类型变量存储一个地址，地址对应的空间才真正存储数据，内存通常在堆中分配，当没有任何变量引用这个地址时，该地址对应的数据空间就成为一个垃圾由GC回收



### 09. 标识符

- 变量、方法、函数等命名时使用的字符
- 英文字母大小写加数字加下划线
- 数字不可以开头
- 标识符连接不可以用空格
- 严格区分大小写
- 不能使用关键字作为标识符
- 驼峰法命名
- Go中如果变量名、函数名、首字母大写表示其他包可以访问（可导出），如果为小写则只能本包中使用



## Character 2 运算符



### 01.  算术运算符

| 运算符 | 运算       | 范例          | 结果    |
| ------ | ---------- | ------------- | ------- |
| +      | 正号       | +3            | 3       |
| -      | 负号       | -4            | -4      |
| +      | 加         | 1+1           | 2       |
| -      | 减         | 2-1           | 1       |
| *      | 乘         | 2*2           | 4       |
| /      | 除         | 5/5           | 1       |
| %      | 取模/取余  | 7%5           | 2       |
| ++     | 自增       | `i = 1` `i++` | `i=2`   |
| --     | 自减       | `i=1` `i--`   | `i=0`   |
| +      | 字符串拼接 | “he” + "llo"  | "hello" |

- % 使用特点

  ``````go
  // a % b = a -a/b*b
  // -10 % 3 = -10 -(-10)/3 * 3 = -1
  // 10 % -3 = 10 - 10/(-3) * (-3) = 1
  // -10 % -3 = -10 - (-10)/(-3) * (-3) = -1
  ``````



###  02. 关系运算符

| 运算符 | 运算     | 范例 | 结果  |
| ------ | -------- | ---- | ----- |
| ==     | 相等于   | 1==1 | true  |
| !=     | 不等于   | 1!=1 | false |
| <      | 小于     | 1<1  | false |
| >      | 大于     | 1>2  | false |
| <=     | 小于等于 | 1<=1 | true  |
| >=     | 大于等于 | 1>=1 | true  |

- 比较运算符的结果都为`bool`型



### 03. 逻辑运算符

假设A=True	B=False

| 运算符 | 描述                      | 实例           |
| ------ | ------------------------- | -------------- |
| &&     | 逻辑与 都为True为True     | A&&B = False   |
| \|\|   | 逻辑或 有一个True即为True | A\|\|B = True  |
| !      | 逻辑非 取反               | !(A&&B) = True |

- && 为**短路与**：**如果第一个条件为false**，第二个条件不会判断，结果为false
- || 为**短路或**：**如果第一个条件为true**,第二个条件不会判断，结果为true



### 04. 赋值运算符

| 运算符 | 描述                                   | 实例                        |
| ------ | -------------------------------------- | --------------------------- |
| =      | 简单的赋值运算符，将表达式的值赋给左边 | c = a +b 将a+b的结果赋值给c |
| +=     | 相加后再赋值                           | c += a ==> c = c + a        |
| -=     | 相减后再赋值                           | c -= a ==> c = c - a        |
| *=     | 相乘后再赋值                           | c *= a ==> c = c * a        |
| /=     | 相除后再赋值                           | c /= a ==> c = c / a        |
| %=     | 求余后再赋值                           | c % a ==> c = c % a         |
|        |                                        |                             |
| <<=    | 左移后再赋值                           | c <<= 2 ==> c = c << 2      |
| \>\>=  | 右移后再赋值                           | c >>= 2 ==> c = c >> 2      |
| &=     | 按位与后再赋值                         | c &= 2 ==> c = c & 2        |
| ^=     | 按位异或后再赋值                       | c ^= 2 ==> c = c ^ 2        |
| \|=    | 按位或后再赋值                         | c \|= 2 ==> c = c \| 2      |

- 经典题： 数值交换

  ``````go
  var a int = 10
  var b int = 20
  // 第一种方法
  a = a + b
  b = a - b
  a = a - b
  // 第二种方法
  tmp := a
  a = b
  b = tmp
  // 第三种方法
  a, b = b, a
  ``````

  

### 05. 位运算符

| 运算符 | 描述                                                         |
| ------ | ------------------------------------------------------------ |
| &      | 按位与运算符`&`是双目运算符 其功能是参与运算的两数各对应的二进位相与。   运算规则是同时为1则为1，否则为0 |
| \|     | 按位或运算符`|`是双目运算符 其功能是参与运算的两数各对应的二进位相或。   运算规则是当二进制位不同时，结果为1否则为0 |
| ^      | 按位异或运算符`^`是双目运算符 其功能是参与运算的两数各对应的二进位相异或。计算规则是当二进位不同时结果为1否则为0 |
| <<     | 左移运算符`<<`是双目运算符 其功能把`<<`左边的运算数的个二进位全部左移若干位，高位丢弃，低位补0， 左移n位就是乘以2的n次方 |
| \>\>   | 右移运算符`>>`是双目运算符 其功能把`>>`左边的运算数的个二进位全部右移若干位， 左移n位就是除以2的n次方 |

### 06. 其他运算符

| 运算符 | 描述             |
| ------ | ---------------- |
| &      | 返回变量存储地址 |
| *      | 指针变量         |

### 07. 运算符优先级

| 分类       | 描述                                         | 关联性     |
| ---------- | -------------------------------------------- | ---------- |
| 后缀       | () [] -> . ++ --                             | 左到右     |
| 单目       | + - ~ ! (type) * & `sizeof`                  | **右到左** |
| 乘法       | * / %                                        | 左到右     |
| 加法       | + -                                          | 左到右     |
| 移位       | <<  >>                                       | 左到右     |
| 关系       | <、 <=、 >、 >=                              | 左到右     |
| 相等       | == !=                                        | 左到右     |
| 按位AND    | &                                            | 左到右     |
| 按位XOR    | ^                                            | 左到右     |
| 按位OR     | \|                                           | 左到右     |
| 逻辑AND    | &&                                           | 左到右     |
| 逻辑OR     | \|\|                                         | 左到右     |
| 赋值运算符 | =、+=、-=、*=、/=、%=、>>=、<<=、&=、^=、\|= | **右到左** |
| 逗号       | ,                                            | 左到右     |

- 以上优先级从高到低

### 08. 键盘输入语句

- 使用`fmt`包中的`fmt.Scanln()` 或`fmt.Scanf()`

  ``````go
  func Scanln(a ...interface{}) (n int, err error)
  // Scanln 类似Scan，但会在换行时才停止扫描
  func Scanf(format string, a ...interface{}) (n int, err error)
  // Scanf 从标准输入扫描文本，根据format参数指定的格式将成功读取的空白分隔的值传递给本函数的参数
  ``````

- 使用

  ``````go
  var name string
  fmt.Scanln(&name)
  
  var age int
  fmt.Scanf("%d", &age)
  ``````

### 09. 进制

- 二进制： go中不能直接使用二进制表示一个整数
- 十进制
- 八进制
- 十六进制： 0-9 A-F

#### 09.01 其他进制转换十进制

- 二进制转十进制

  ``````reStructuredText
  1011 = 1*1+1*2+0*2*2+1*2*2*2 = 1 + 2 + 0 + 8 = 11
  // 从低位开始，每位乘以2的（位数-1）次方
  ``````

- 八进制转十进制

  ``````
  0123 = 3 * 1 + 2 * 8 + 1 * 8 * 8 = 3 + 16 + 64 = 83
  // 从低位开始，每位乘以8的（位数-1）次方
  ``````

- 十六进制转十进制

  ```````
  0x34A = 10 * 1 + 4 *16 + 3 * 16 * 16 = 10 + 64 + 768 = 842
  // 从低位开始，每位乘以16的（位数-1）次方
  ```````

#### 09.02 十进制转其他进制

- 十进制转二进制

  ``````
  将该数不断除以2，直到商为0，然后将每部得到的余数倒过来
  ``````

- 十进制转八进制

  ``````
  将该数不断除以8，直到商为0，然后将每部得到的余数倒过来
  ``````

- 十进制转十六进制

  ``````
  将该数不断除以16，直到商为0，然后将每部得到的余数倒过来
  ``````

#### 09.03 二进制转八进制、十六进制

- 二进制转八进制

  ``````
  将二进制数每三个一组（从低位开始组合）， 转成对应的八进制数即可
  11010101 = 0325
  ``````

- 二进制转十六进制

  ``````
  将二进制数每四个一组（从低位开始组合）， 转成对应的十六进制数即可
  11010101 = 0xD5
  ``````

#### 09.04 八进制、十六进制转二进制

- 八进制转二进制

  ``````
  将八进制数每一位转成对应的三位的二进制数即可
  0237 = 10011111
  ``````

- 十六进制转二进制

  ``````
  将十六进制的每一位数转成对应的四位二进制数即可
  0x237 = 1000110111
  ``````

#### 09.05 位运算

##### 09.05.01 原码、补码、反码

- 对于有符号，二进制的最高位表符号位：0表正数，1表负数
- 正数的原码、反码、补码都一样
- 负数的反码为： 原码的符号位不变，其他位取反
- 负数的补码为： 反码每位+1
- 0的原码、反码、补码都为0
- 计算机中运算都是以补码的方式进行运算

##### 09.05.02 位运算符和移位运算符

- 按位与 `&` :  全为1结果为1否则为0

- 按位或 `|` : 有一个为1结果为1否则为0

- 按位异或 `^` : 一个为0一个为1结果为1否则为0

- 右移位运算符 `>>` : 低位溢出，符号不变，用符号位补溢出的高位

- 左移位运算符 `<<` : 符号位不变，低位补0

  `````` go
  a := 1 >> 2 // 0000 0001 => 0000 0000 = 0
  c := 1 << 2 // 0000 0001 => 0000 0100 = 4
  ``````

  





